# Beyond Uplands: Integrating Riparian Areas into Sagebrush Conservation Design

[![DOI](https://zenodo.org/badge/DOI/10.5281/zenodo.17904662.svg)](https://doi.org/10.5281/zenodo.17904662) [![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

------------------------------------------------------------------------

## Overview

This repository contains the source code and analytical framework for **Beyond Uplands**, a project that integrates riparian (mesic) ecosystems into the [Sagebrush Conservation Design (SCD)](https://sagebrushconservation.org/).

**Explore the conservation tiers using our interactive Google Earth Engine App:** <https://wlfw-um.projects.earthengine.app/view/mesic-analysis-platform>

Riparian and mesic habitats are essential biological hotspots in the American West, supporting 80% of wildlife, yet they are often managed in isolation from surrounding uplands. To address this, we developed a framework that complements the SCD to incorporate these habitats into broader land planning. By analyzing 40 years of riparian vegetation data alongside sagebrush ecosystems, we classified watersheds into three actionable conservation tiers based on water availability and vegetation health.

The repository provides: \* **Replication Pipeline:** R scripts to reproduce the conservation tier classification and summary statistics. \* **Methodology:** Google Earth Engine scripts used to generate the source data (for transparency).

------------------------------------------------------------------------

## Conservation Framework

The core of this analysis is the classification of watersheds into three actionable tiers. This is operationalized by intersecting **Sagebrush Integrity** (SCD Core & Growth Areas) with **Mesic Resource Persistence** (a proxy for water availability derived from Landsat).

| Tier | Name | Logic | Conservation Goal |
|:-----------------|:-----------------|:-----------------|:-----------------|
| **1** | **Protect & Maintain** | `SCD > 15%` AND `High Pers. > 65%` | Protect intact mesic resources near functioning uplands. |
| **2** | **Restore & Enhance** | `SCD > 15%` AND `High > 15%` AND `Mixed > 15%` | Target areas with water availability that show signs of hydrologic disconnection. |
| **3** | **Strategically Manage** | `SCD > 15%` AND `(High + Med) > 15%` | Sustain mesic resources in water-limited landscapes where restoration potential is lower. |

*Note: "SCD" refers to the proportion of valley bottom within 5km of Core or Growth areas. "Mixed" refers to areas with Medium or Low vegetation persistence.*

------------------------------------------------------------------------

## Data Access

To keep this repository lightweight, **all input data** (including shapefiles) are hosted on Zenodo. GitHub is used strictly for script version control.

### 1. Repository Structure

``` text
├── data/
│   ├── input_data/     # Empty on GitHub. (Download data from Zenodo - see below)
├── scripts/
│   ├── 01_GEE_Biome_Analysis.js        # Google Earth Engine: Biome-wide persistence analysis
│   ├── 02_GEE_HUC12_Prioritization.js # Google Earth Engine: Aggregation of metrics to HUC12s
│   └── 03_R_Conservation_Tiers.R       # R Script: Main classification, tables, and figures
├── outputs/            # Output directory for results generated by the R script
└── README.md           # This file
```

### 2. Downloading the Input Data

You must download the input shapefiles to run the replication script.

1.  **Clone this Repository:** Download the code to your computer. `bash     git clone https://github.com/YOUR_USERNAME/mesic-sagebrush-framework.git`

2.  **Download Data Bundle from Zenodo:**

    -   Navigate to the **Zenodo Record**: <https://doi.org/10.5281/zenodo.XXXXXX>
    -   Download the **input_data.zip** file).
    -   Extract the contents into the `data/input_data/` folder inside your cloned repository.

3.  **Verification:** Your `data/input_data/` folder should now contain:

    -   `tl_2022_us_state.shp` (and sidecars)
    -   `YYYYMMDD_HUC12_DGO_proportions_Metrics_SHP.shp` (and sidecars)

------------------------------------------------------------------------

## Installation

This codebase utilizes **R (v4.3 or higher)**.

1.  Clone or download the repository to your local machine.
2.  Open RStudio.
3.  Install the required dependencies: `r     install.packages(c("sf", "dplyr", "tidyr", "ggplot2", "patchwork", "knitr", "scales", "forcats"))`

------------------------------------------------------------------------

## Usage

### Running the Replication Script

You can reproduce the manuscript's figures, tables, and the final classified spatial dataset using the provided R script.

1.  **Open Project:** Open the `scripts/03_R_Conservation_Tiers.R` file in RStudio.
2.  **Set Working Directory:** Ensure your working directory is set to the **root** of this repository.
    -   *RStudio Tip:* Go to `Session` -\> `Set Working Directory` -\> `To Project Directory`.
    -   *Check:* The script expects to find data in `data/input_data/`.
3.  **Run Code:** Execute the script from top to bottom.

### Outputs

The script will automatically create the `outputs/` folder and generate the following files (prefixed with the run date):

**1. Spatial Data (`outputs/spatial/`)** \* `_Classified_Watersheds_Tiered.shp`: The final HUC12 shapefile containing the assigned `Tier` and `MgmtAction` for every watershed in the biome.

**2. Figures (`outputs/figures/`)** \* `_Biome_Wide_Tier_Map.png`: A map of the western U.S. showing the three conservation tiers. \* `_Overall_Priority_Summary.png`: Bar chart of the proportion of watersheds in each tier. \* `_State_Ownership_Comparison.png`: Bar chart comparing Public vs. Private restoration opportunities by state. \* `_State_Summary_[StateName].png`: Individual dashboard reports for each state (e.g., MT, WY, NV).

**3. Tables (`outputs/tables/`)** \* `_Overall_Summary_Table.csv`: Summary statistics of acreage and watershed counts by Tier.

------------------------------------------------------------------------

## Citation

If you use this dataset or code in your research, please cite the following manuscript:

> Mueller, K. R., et al. (2025). Beyond Uplands: Integrating Riparian Areas into Sagebrush Conservation Design for a More Resilient West. *[Journal Name TBD]*.

The version-of-record repository for the manuscript can be found at Zenodo: <https://doi.org/10.5281/zenodo.17904662>

## License

This project is licensed under the MIT License. See the [LICENSE](LICENSE) file for details.
